Compiling /api/follow-up/cancel ...
 ‚úì Compiled /api/follow-up/cancel in 732ms
 POST /api/follow-up/cancel 200 in 867ms
MODO DE TESTE CONFIGURADO COMO: ATIVADO
Processador de mensagens personalizado configurado.
Sistema de follow-up inicializado com integra√ß√£o da API Lumibot.
 POST /api/follow-up 201 in 353ms
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Processando passo 0 (Etapa 1)
Modo de teste: convertendo tempo "30 minutos" para 30 segundos para testes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 0
Cliente ID: 58
Conte√∫do: "Ei, Boss! üöÄ Vi que voc√™ recebeu a mensagem, mas ainda n√£o respondeu. Quer tirar alguma d√∫vida ante
Hor√°rio Agendado: 2025-03-25T00:02:49.032Z
Metadata: {
  "template_name": "novo_lead_10min",
  "category": "Utility",
  "stage_name": "Etapa 1",
  "clientName": "58",
  "templateParams": {
    "name": "novo_lead_10min",
    "category": "Utility",
    "language": "pt_BR"
  },
  "processedParams": {
    "1": "58"
  }
}
Atraso calculado: 29992ms (29.992 segundos)
Agendando mensagem para daqui a 29.992 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-0
Mensagem para o passo 0 agendada com sucesso
Pr√≥ximo passo: novo_lead_30min, tempo de espera: 30000ms
Agendando pr√≥ximo passo 1 para follow-up af27c504-d471-4fc7-9310-c2f800ccd631 com delay de 30000ms
Recarregando 1 follow-ups ativos com mensagens pendentes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 0
Cliente ID: 58
Conte√∫do: "Ei, Boss! üöÄ Vi que voc√™ recebeu a mensagem, mas ainda n√£o respondeu. Quer tirar alguma d√∫vida ante
Hor√°rio Agendado: 2025-03-25T00:02:49.032Z
Metadata: {
  "template_name": "novo_lead_10min",
  "category": "Utility",
  "stage_name": "Etapa 1"
}
Cancelando timeout existente para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-0
Atraso calculado: 25030ms (25.03 segundos)
Agendando mensagem para daqui a 25.03 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-0
Reagendado envio da mensagem do passo 0 para follow-up af27c504-d471-4fc7-9310-c2f800ccd631
Executando timeout para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-0
===== LOG DE ENVIO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 0
Cliente ID: 58
Status do follow-up: active
Enviando mensagem via API Lumibot
Template: novo_lead_10min
Categoria: Utility
===== REQUISI√á√ÉO GET CONVERSA DO CLIENTE =====
Cliente ID: 58
Endpoint: https://app.lumibot.com.br/api/v1/accounts/10/conversations/58
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Processando passo 1 (Etapa 1)
Modo de teste: convertendo tempo "30 minutos" para 30 segundos para testes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 1
Cliente ID: 58
Conte√∫do: Oi, {{1}}! Percebi que seu atendimento ainda est√° em andamento. Sei que a rotina pode ser corrida, e
Hor√°rio Agendado: 2025-03-25T00:03:19.066Z
Metadata: {
  "template_name": "novo_lead_30min",
  "category": "Utility",
  "stage_name": "Etapa 1",
  "clientName": "58",
  "templateParams": {
    "name": "novo_lead_30min",
    "category": "Utility",
    "language": "pt_BR"
  },
  "processedParams": {
    "1": "58"
  }
}
Atraso calculado: 29992ms (29.992 segundos)
Agendando mensagem para daqui a 29.992 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-1
Mensagem para o passo 1 agendada com sucesso
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - √öltimo passo do est√°gio, aguardando resposta antes de avan√ßar para Etapa 2
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - Preparando transi√ß√£o para o pr√≥ximo est√°gio: Etapa 2
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - Existem 2 mensagens pendentes no est√°gio "Etapa 1". Pausando para aguardar envio completo.
===== RESPOSTA GET CONVERSA DO CLIENTE =====
Status: 200
Detalhes do envio para Lumibot:
- clientId: 58
- templateName: novo_lead_10min
- category: Utility
===== RESPOSTA DA API LUMIBOT =====
Status: 200
Resultado do envio via Lumibot: SUCESSO
Atualizando mensagem como entregue no banco de dados
Mensagem marcada como entregue com sucesso
Timeout removido do mapa: af27c504-d471-4fc7-9310-c2f800ccd631-0
Executando timeout para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-1
===== LOG DE ENVIO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 1
Cliente ID: 58
Status do follow-up: active
Enviando mensagem via API Lumibot
Template: novo_lead_30min
Categoria: Utility
===== REQUISI√á√ÉO GET CONVERSA DO CLIENTE =====
Cliente ID: 58
Endpoint: https://app.lumibot.com.br/api/v1/accounts/10/conversations/58
===== RESPOSTA GET CONVERSA DO CLIENTE =====
Status: 200
Detalhes do envio para Lumibot:
- clientId: 58
- templateName: novo_lead_30min
- category: Utility
===== RESPOSTA DA API LUMIBOT =====
Status: 200
Resultado do envio via Lumibot: SUCESSO
Atualizando mensagem como entregue no banco de dados
Mensagem marcada como entregue com sucesso
Todas as mensagens do est√°gio "Etapa 1" foram entregues, retomando transi√ß√£o de est√°gio
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Erro ao enviar mensagem: Error [PrismaClientValidationError]: 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany()` invocation in
/root/app_follow-up/.next/server/chunks/[root of the server]__65335b24._.js:1609:180

  1606 // Importar a fun√ß√£o dinamicamente para evitar refer√™ncia circular
  1607 const { processStageTransition } = await __turbopack_context__.r("[project]/app/api/follow-up/_lib/manager.ts [app-route] (ecmascript, async loader)")(__turbopack_context__.i);
  1608 // Verificar qual o pr√≥ximo est√°gio
‚Üí 1609 const stages = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany({
         where: {
           campaign_id: "d17d857b-8366-4a90-9434-6dec8416dab6",
           ~~~~~~~~~~~
       ?   AND?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   OR?: FollowUpFunnelStageWhereInput[],
       ?   NOT?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   id?: StringFilter | String,
       ?   name?: StringFilter | String,
       ?   order?: IntFilter | Int,
       ?   description?: StringNullableFilter | String | Null,
       ?   created_at?: DateTimeFilter | DateTime,
       ?   steps?: FollowUpStepListRelationFilter,
       ?   campaigns?: FollowUpCampaignListRelationFilter
         },
         orderBy: {
           order: "asc"
         }
       })

Unknown argument `campaign_id`. Did you mean `campaigns`? Available options are marked with ?.
    at <unknown> (app/api/follow-up/_lib/scheduler.ts:249:58)
    at async sendMessage (app/api/follow-up/_lib/scheduler.ts:249:25)
    at async Timeout._onTimeout (app/api/follow-up/_lib/scheduler.ts:56:8)
  247 |           
  248 |           // Verificar qual o pr√≥ximo est√°gio
> 249 |           const stages = await prisma.followUpFunnelStage.findMany({
      |                                                          ^
  250 |             where: { 
  251 |               campaign_id: followUp.campaign_id
  252 |             }, {
  clientVersion: '6.4.1'
}
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
file:///root/app_follow-up/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Erro ao enviar mensagem agendada af27c504-d471-4fc7-9310-c2f800ccd631-1: Error [PrismaClientValidationError]: 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany()` invocation in
/root/app_follow-up/.next/server/chunks/[root of the server]__65335b24._.js:1609:180

  1606 // Importar a fun√ß√£o dinamicamente para evitar refer√™ncia circular
  1607 const { processStageTransition } = await __turbopack_context__.r("[project]/app/api/follow-up/_lib/manager.ts [app-route] (ecmascript, async loader)")(__turbopack_context__.i);
  1608 // Verificar qual o pr√≥ximo est√°gio
‚Üí 1609 const stages = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany({
         where: {
           campaign_id: "d17d857b-8366-4a90-9434-6dec8416dab6",
           ~~~~~~~~~~~
       ?   AND?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   OR?: FollowUpFunnelStageWhereInput[],
       ?   NOT?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   id?: StringFilter | String,
       ?   name?: StringFilter | String,
       ?   order?: IntFilter | Int,
       ?   description?: StringNullableFilter | String | Null,
       ?   created_at?: DateTimeFilter | DateTime,
       ?   steps?: FollowUpStepListRelationFilter,
       ?   campaigns?: FollowUpCampaignListRelationFilter
         },
         orderBy: {
           order: "asc"
         }
       })

Unknown argument `campaign_id`. Did you mean `campaigns`? Available options are marked with ?.
    at <unknown> (app/api/follow-up/_lib/scheduler.ts:249:58)
    at async sendMessage (app/api/follow-up/_lib/scheduler.ts:249:25)
    at async Timeout._onTimeout (app/api/follow-up/_lib/scheduler.ts:56:8)
  247 |           
  248 |           // Verificar qual o pr√≥ximo est√°gio
> 249 |           const stages = await prisma.followUpFunnelStage.findMany({
      |                                                          ^
  250 |             where: { 
  251 |               campaign_id: followUp.campaign_id
  252 |             }, {
  clientVersion: '6.4.1'
}
Stack trace do erro: PrismaClientValidationError: 
Invalid `__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany()` invocation in
/root/app_follow-up/.next/server/chunks/[root of the server]__65335b24._.js:1609:180

  1606 // Importar a fun√ß√£o dinamicamente para evitar refer√™ncia circular
  1607 const { processStageTransition } = await __turbopack_context__.r("[project]/app/api/follow-up/_lib/manager.ts [app-route] (ecmascript, async loader)")(__turbopack_context__.i);
  1608 // Verificar qual o pr√≥ximo est√°gio
‚Üí 1609 const stages = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].followUpFunnelStage.findMany({
         where: {
           campaign_id: "d17d857b-8366-4a90-9434-6dec8416dab6",
           ~~~~~~~~~~~
       ?   AND?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   OR?: FollowUpFunnelStageWhereInput[],
       ?   NOT?: FollowUpFunnelStageWhereInput | FollowUpFunnelStageWhereInput[],
       ?   id?: StringFilter | String,
       ?   name?: StringFilter | String,
       ?   order?: IntFilter | Int,
       ?   description?: StringNullableFilter | String | Null,
       ?   created_at?: DateTimeFilter | DateTime,
       ?   steps?: FollowUpStepListRelationFilter,
       ?   campaigns?: FollowUpCampaignListRelationFilter
         },
         orderBy: {
           order: "asc"
         }
       })

Unknown argument `campaign_id`. Did you mean `campaigns`? Available options are marked with ?.
    at Pn (/root/app_follow-up/node_modules/@prisma/client/runtime/library.js:29:1363)
    at Un.handleRequestError (/root/app_follow-up/node_modules/@prisma/client/runtime/library.js:121:7090)
    at Un.handleAndLogRequestError (/root/app_follow-up/node_modules/@prisma/client/runtime/library.js:121:6771)
    at Un.request (/root/app_follow-up/node_modules/@prisma/client/runtime/library.js:121:6478)
    at async l (/root/app_follow-up/node_modules/@prisma/client/runtime/library.js:130:9644)
    at async sendMessage (/root/app_follow-up/.next/server/chunks/[root of the server]__65335b24._.js:1609:36)
    at async Timeout._onTimeout (/root/app_follow-up/.next/server/chunks/[root of the server]__65335b24._.js:1451:17)
Timeout removido do mapa: af27c504-d471-4fc7-9310-c2f800ccd631-1
MODO DE TESTE CONFIGURADO COMO: ATIVADO
=== DADOS DA RESPOSTA DO CLIENTE ===
followUpId: af27c504-d471-4fc7-9310-c2f800ccd631
clientId: 58
message: Ol√°, estou testando o avan√ßo de est√°gio!
=== FIM DADOS DA RESPOSTA DO CLIENTE ===
=== DADOS DA RESPOSTA DO CLIENTE ===
{
  followUpId: 'af27c504-d471-4fc7-9310-c2f800ccd631',
  clientId: '58',
  message: 'Ol√°, estou testando o avan√ßo de est√°gio!'
}
=== FIM DADOS DA RESPOSTA DO CLIENTE ===
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Est√°gio atual: Etapa 1 √≠ndice: 0
Cliente respondeu durante follow-up ativo. Avan√ßando para pr√≥ximo est√°gio: Etapa 2
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Processando passo 2 (Etapa 2)
Modo de teste: convertendo tempo "30 minutos" para 30 segundos para testes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 2
Cliente ID: 58
Conte√∫do: Oi, {{1}}! Vi que voc√™ iniciou um processo conosco, mas ainda n√£o conclu√≠mos sua qualifica√ß√£o. Caso 
Hor√°rio Agendado: 2025-03-25T00:03:55.501Z
Metadata: {
  "template_name": "qualificacao_10min",
  "category": "Utility",
  "stage_name": "Etapa 2",
  "clientName": "58",
  "templateParams": {
    "name": "qualificacao_10min",
    "category": "Utility",
    "language": "pt_BR"
  },
  "processedParams": {
    "1": "58"
  }
}
Atraso calculado: 29991ms (29.991 segundos)
Agendando mensagem para daqui a 29.991 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-2
Mensagem para o passo 2 agendada com sucesso
Pr√≥ximo passo: qualificacao_1h, tempo de espera: 30000ms
Agendando pr√≥ximo passo 3 para follow-up af27c504-d471-4fc7-9310-c2f800ccd631 com delay de 30000ms
 POST /api/follow-up/client-response 200 in 394ms
Recarregando 1 follow-ups ativos com mensagens pendentes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 2
Cliente ID: 58
Conte√∫do: Oi, {{1}}! Vi que voc√™ iniciou um processo conosco, mas ainda n√£o conclu√≠mos sua qualifica√ß√£o. Caso 
Hor√°rio Agendado: 2025-03-25T00:03:55.501Z
Metadata: {
  "template_name": "qualificacao_10min",
  "category": "Utility",
  "stage_name": "Etapa 2"
}
Cancelando timeout existente para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-2
Atraso calculado: 25044ms (25.044 segundos)
Agendando mensagem para daqui a 25.044 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-2
Reagendado envio da mensagem do passo 2 para follow-up af27c504-d471-4fc7-9310-c2f800ccd631
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 80ms
Executando timeout para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-2
===== LOG DE ENVIO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 2
Cliente ID: 58
Status do follow-up: active
Cliente j√° respondeu e mudou de fase, cancelando envio
Timeout removido do mapa: af27c504-d471-4fc7-9310-c2f800ccd631-2
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Modo de teste: reduzindo tempo de espera de 1800000ms para 30 segundos
Processando passo 3 (Etapa 2)
Modo de teste: convertendo tempo "30 minutos" para 30 segundos para testes
===== LOG DE AGENDAMENTO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 3
Cliente ID: 58
Conte√∫do: Boss! Para te ajudar com mais informa√ß√µes, preparamos um v√≠deo explicativo sobre como funciona. Voc√™
Hor√°rio Agendado: 2025-03-25T00:04:25.526Z
Metadata: {
  "template_name": "qualificacao_1h",
  "category": "Utility",
  "stage_name": "Etapa 2",
  "clientName": "58",
  "templateParams": {
    "name": "qualificacao_1h",
    "category": "Utility",
    "language": "pt_BR"
  },
  "processedParams": {
    "1": "58"
  }
}
Atraso calculado: 29991ms (29.991 segundos)
Agendando mensagem para daqui a 29.991 segundos
Timeout armazenado com sucesso para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-3
Mensagem para o passo 3 agendada com sucesso
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - √öltimo passo do est√°gio, aguardando resposta antes de avan√ßar para Etapa 3
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - Preparando transi√ß√£o para o pr√≥ximo est√°gio: Etapa 3
Follow-up af27c504-d471-4fc7-9310-c2f800ccd631 - Existem 2 mensagens pendentes no est√°gio "Etapa 2". Pausando para aguardar envio completo.
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 72ms
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 59ms
Executando timeout para mensagem af27c504-d471-4fc7-9310-c2f800ccd631-3
===== LOG DE ENVIO DE MENSAGEM =====
FollowUp ID: af27c504-d471-4fc7-9310-c2f800ccd631
Step Index: 3
Cliente ID: 58
Status do follow-up: active
Enviando mensagem via API Lumibot
Template: qualificacao_1h
Categoria: Utility
===== REQUISI√á√ÉO GET CONVERSA DO CLIENTE =====
Cliente ID: 58
Endpoint: https://app.lumibot.com.br/api/v1/accounts/10/conversations/58
===== RESPOSTA GET CONVERSA DO CLIENTE =====
Status: 200
Detalhes do envio para Lumibot:
- clientId: 58
- templateName: qualificacao_1h
- category: Utility
===== RESPOSTA DA API LUMIBOT =====
Status: 200
Resultado do envio via Lumibot: SUCESSO
Atualizando mensagem como entregue no banco de dados
Mensagem marcada como entregue com sucesso
Timeout removido do mapa: af27c504-d471-4fc7-9310-c2f800ccd631-3
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 65ms
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 61ms
 GET /api/follow-up/status?id=af27c504-d471-4fc7-9310-c2f800ccd631 200 in 63ms
